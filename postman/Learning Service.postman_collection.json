{
  "info": {
    "name": "Learning Service API",
    "description": "Colección de peticiones para probar los endpoints del servicio de aprendizaje",
    "schema": "https://schema.getpostman.com/json/collection/v2.1.0/collection.json"
  },
  "auth": {
    "type": "bearer",
    "bearer": [
      {
        "key": "token",
        "value": "{{jwt_token}}",
        "type": "string"
      }
    ]
  },
  "item": [
    {
      "name": "Dashboard Endpoints",
      "item": [
        {
          "name": "Get Level Overview",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/levels/{{target_language}}",
              "host": ["{{base_url}}"],
              "path": ["levels", "{{target_language}}"]
            },
            "description": "Obtiene un resumen de todos los niveles disponibles con el progreso del usuario para un idioma específico"
          },
          "response": [
            {
              "name": "Level Overview Success",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"levels\": [\n    {\n      \"level\": \"A1\",\n      \"title\": {\n        \"en\": \"Beginner\",\n        \"es\": \"Principiante\"\n      },\n      \"progress\": {\n        \"completedTopics\": 2,\n        \"totalTopics\": 4\n      },\n      \"status\": \"in_progress\"\n    },\n    {\n      \"level\": \"A2\",\n      \"title\": {\n        \"en\": \"Elementary\",\n        \"es\": \"Elemental\"\n      },\n      \"progress\": {\n        \"completedTopics\": 0,\n        \"totalTopics\": 5\n      },\n      \"status\": \"locked\"\n    }\n  ]\n}"
            }
          ]
        },
        {
          "name": "Get Level Topics",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/levels/{{target_language}}/{{level}}/topics",
              "host": ["{{base_url}}"],
              "path": ["levels", "{{target_language}}", "{{level}}", "topics"]
            },
            "description": "Obtiene todos los temas disponibles para un nivel específico con progreso detallado"
          },
          "response": [
            {
              "name": "Level Topics Success",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"level\": \"A1\",\n  \"topics\": [\n    {\n      \"id\": \"articles_1\",\n      \"title\": {\n        \"en\": \"Articles\",\n        \"es\": \"Artículos\"\n      },\n      \"description\": {\n        \"en\": \"Learn to use definite and indefinite articles in English.\",\n        \"es\": \"Aprende a usar los artículos definidos e indefinidos en inglés.\"\n      },\n      \"status\": \"completed\",\n      \"progress\": {\n        \"completedExercises\": 4,\n        \"correctAnswers\": 4,\n        \"wrongAnswers\": 0,\n        \"totalExercises\": 4,\n        \"lastAttempted\": \"2024-01-15T10:30:00Z\"\n      },\n      \"lockedReason\": null\n    },\n    {\n      \"id\": \"basic_greetings\",\n      \"title\": {\n        \"en\": \"Basic Greetings\",\n        \"es\": \"Saludos Básicos\"\n      },\n      \"description\": {\n        \"en\": \"Common greeting expressions\",\n        \"es\": \"Expresiones comunes de saludo\"\n      },\n      \"status\": \"in_progress\",\n      \"progress\": {\n        \"completedExercises\": 2,\n        \"correctAnswers\": 2,\n        \"wrongAnswers\": 1,\n        \"totalExercises\": 4,\n        \"lastAttempted\": \"2024-01-16T14:20:00Z\"\n      },\n      \"lockedReason\": null\n    }\n  ]\n}"
            }
          ]
        },
        {
          "name": "Get Specific Exercise",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/levels/{{target_language}}/{{level}}/{{topic_id}}/{{exercise_id}}",
              "host": ["{{base_url}}"],
              "path": ["levels", "{{target_language}}", "{{level}}", "{{topic_id}}", "{{exercise_id}}"]
            },
            "description": "Obtiene un ejercicio específico por su ID. Incluye la solución solo si ya fue completado."
          },
          "response": [
            {
              "name": "Specific Exercise Success",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"id\": \"ex_1\",\n  \"topicId\": \"articles_1\",\n  \"type\": \"fill-in-the-blank\",\n  \"prompt\": {\n    \"en\": \"___ book is on the table.\"\n  },\n  \"solution\": \"The\",\n  \"options\": null,\n  \"previousAttempts\": 0,\n  \"isCompleted\": true\n}"
            },
            {
              "name": "Exercise Not Found",
              "status": "Not Found",
              "code": 404,
              "body": "{\n  \"success\": false,\n  \"message\": \"Exercise not found\",\n  \"path\": \"/levels/en/A1/articles_1/ex_999\"\n}"
            }
          ]
        },
        {
          "name": "Get Next Exercise (Practice Mode)",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/levels/{{target_language}}/{{level}}/{{topic_id}}",
              "host": ["{{base_url}}"],
              "path": ["levels", "{{target_language}}", "{{level}}", "{{topic_id}}"]
            },
            "description": "Obtiene el siguiente ejercicio que el usuario debe completar en un tema específico. Devuelve el ejercicio basado en su progreso actual."
          },
          "response": [
            {
              "name": "Next Exercise Success",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"id\": \"ex_3\",\n  \"topicId\": \"articles_1\",\n  \"type\": \"multiple-choice\",\n  \"prompt\": {\n    \"es\": \"¿Cuál es correcto? '___ apple is red'\"\n  },\n  \"solution\": null,\n  \"options\": [\"A\", \"An\", \"The\", \"No article\"],\n  \"previousAttempts\": 0,\n  \"isCompleted\": false\n}"
            },
            {
              "name": "Translation Exercise Example",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"id\": \"ex_4\",\n  \"topicId\": \"articles_1\",\n  \"type\": \"translation\",\n  \"prompt\": {\n    \"es\": \"El perro está corriendo\"\n  },\n  \"solution\": null,\n  \"options\": null,\n  \"previousAttempts\": 0,\n  \"isCompleted\": false\n}"
            },
            {
              "name": "No More Exercises",
              "status": "Not Found",
              "code": 404,
              "body": "{\n  \"success\": false,\n  \"message\": \"No more exercises available in this topic\",\n  \"path\": \"/levels/en/A1/articles_1\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "User Management (Auth Service Only)",
      "item": [
        {
          "name": "Create User",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"userId\": \"{{user_id}}\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/users",
              "host": ["{{base_url}}"],
              "path": ["users"]
            },
            "description": "Crea un nuevo usuario en el learning service. Solo para uso del auth service."
          },
          "response": [
            {
              "name": "User Created Successfully",
              "status": "Created",
              "code": 201,
              "body": "{\n  \"success\": true,\n  \"message\": \"User created successfully\",\n  \"userId\": \"testuser123\"\n}"
            },
            {
              "name": "User Creation Failed",
              "status": "Internal Server Error",
              "code": 500,
              "body": "{\n  \"success\": false,\n  \"message\": \"Failed to create user\",\n  \"userId\": \"testuser123\"\n}"
            }
          ]
        },
        {
          "name": "Delete User",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/{{user_id}}",
              "host": ["{{base_url}}"],
              "path": ["users", "{{user_id}}"]
            },
            "description": "Elimina completamente un usuario y todos sus datos. Solo para uso del auth service."
          },
          "response": [
            {
              "name": "User Deleted Successfully",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"success\": true,\n  \"message\": \"User deleted successfully\",\n  \"userId\": \"testuser123\"\n}"
            },
            {
              "name": "User Deletion Failed",
              "status": "Internal Server Error",
              "code": 500,
              "body": "{\n  \"success\": false,\n  \"message\": \"Failed to delete user\",\n  \"userId\": \"testuser123\"\n}"
            }
          ]
        },
        {
          "name": "Reset User Progress",
          "request": {
            "method": "DELETE",
            "header": [],
            "url": {
              "raw": "{{base_url}}/users/{{user_id}}/progress",
              "host": ["{{base_url}}"],
              "path": ["users", "{{user_id}}", "progress"]
            },
            "description": "Resetea todo el progreso de aprendizaje del usuario pero mantiene la cuenta y configuración."
          },
          "response": [
            {
              "name": "Progress Reset Successfully",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"success\": true,\n  \"message\": \"User progress reset successfully\",\n  \"userId\": \"testuser123\"\n}"
            },
            {
              "name": "Progress Reset Failed",
              "status": "Internal Server Error",
              "code": 500,
              "body": "{\n  \"success\": false,\n  \"message\": \"Failed to reset user progress\",\n  \"userId\": \"testuser123\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "Legacy Endpoints",
      "item": [
        {
          "name": "Get Topic Details",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/levels/en/A1/even_1",
              "host": ["{{base_url}}"],
              "path": ["levels", "en", "A1", "even_1"]
            },
            "description": "Obtiene los detalles completos de un tema específico con ejercicios"
          },
          "response": [
            {
              "name": "Topic Details Success",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"topicId\": \"even_1\",\n  \"title\": \"Basic Numbers\",\n  \"description\": \"Learn basic even numbers in English\",\n  \"targetLanguage\": \"en\",\n  \"level\": \"A1\",\n  \"estimatedTimeMinutes\": 15,\n  \"exercises\": [\n    {\n      \"exerciseId\": \"ex1\",\n      \"type\": \"translation\",\n      \"question\": \"Translate: dos\",\n      \"correctAnswer\": \"two\",\n      \"options\": [\"one\", \"two\", \"three\", \"four\"]\n    }\n  ]\n}"
            }
          ]
        },
        {
          "name": "Submit Exercise Answer",
          "request": {
            "method": "POST",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              },
              {
                "key": "Content-Type",
                "value": "application/json",
                "type": "text"
              }
            ],
            "body": {
              "mode": "raw",
              "raw": "{\n  \"exerciseId\": \"ex1\",\n  \"userAnswer\": \"two\"\n}"
            },
            "url": {
              "raw": "{{base_url}}/levels/en/A1/even_1/submit",
              "host": ["{{base_url}}"],
              "path": ["levels", "en", "A1", "even_1", "submit"]
            },
            "description": "Envía la respuesta de un usuario para un ejercicio específico"
          },
          "response": [
            {
              "name": "Correct Answer",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"correct\": true,\n  \"correctAnswer\": \"two\",\n  \"explanation\": \"Great! 'dos' translates to 'two' in English.\"\n}"
            },
            {
              "name": "Incorrect Answer",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"correct\": false,\n  \"correctAnswer\": \"two\",\n  \"explanation\": \"The correct translation of 'dos' is 'two'.\"\n}"
            }
          ]
        }
      ]
    },
    {
      "name": "User Progress",
      "item": [
        {
          "name": "Get User Progress",
          "request": {
            "method": "GET",
            "header": [
              {
                "key": "Authorization",
                "value": "Bearer {{jwt_token}}",
                "type": "text"
              }
            ],
            "url": {
              "raw": "{{base_url}}/progress?targetLanguage=en",
              "host": ["{{base_url}}"],
              "path": ["progress"],
              "query": [
                {
                  "key": "targetLanguage",
                  "value": "en",
                  "description": "Idioma objetivo para filtrar progreso"
                }
              ]
            },
            "description": "Obtiene el progreso general del usuario autenticado"
          },
          "response": [
            {
              "name": "User Progress Success",
              "status": "OK",
              "code": 200,
              "body": "{\n  \"userId\": \"testuser123\",\n  \"onboardingStep\": \"language_selection\",\n  \"totalTopicsCompleted\": 5,\n  \"totalTopicsAvailable\": 20,\n  \"overallProgressPercentage\": 25,\n  \"targetLanguage\": \"en\"\n}"
            }
          ]
        }
      ]
    }
  ],
  "variable": [
    {
      "key": "base_url",
      "value": "http://localhost:3001"
    },
    {
      "key": "jwt_token",
      "value": "eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJpc3MiOiJhdXRoLXNlcnZpY2UiLCJzdWIiOiJ0ZXN0dXNlcjEyMyIsImVtYWlsIjoidGVzdEBleGFtcGxlLmNvbSIsInVzZXJJZCI6InRlc3R1c2VyMTIzIiwiZXhwIjoxNzM4MDE1MjAwLCJpYXQiOjE3Mzc5Mjg4MDB9.4K5VQ5VgZKJgZXcW_ZrGgxzNbKm7XZZd8kKHJhNzAaU",
      "description": "Token JWT válido hardcodeado para testing (válido hasta enero 2025)"
    },
    {
      "key": "target_language",
      "value": "en",
      "description": "Idioma objetivo (en, es)"
    },
    {
      "key": "level",
      "value": "A1",
      "description": "Nivel de aprendizaje (A1, A2, B1, B2, C1, C2)"
    },
    {
      "key": "topic_id",
      "value": "articles_1",
      "description": "ID del tema (articles_1, basic_greetings, etc.)"
    },
    {
      "key": "exercise_id",
      "value": "ex_1",
      "description": "ID del ejercicio específico (ex_1, ex_2, etc.)"
    },
    {
      "key": "user_id",
      "value": "testuser123",
      "description": "ID del usuario para pruebas"
    }
  ]
}
